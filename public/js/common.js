"use strict";
var articleImages,buttonArticleBackScroll,scrollProgress,$pageRootClassName="page",windowEvents=[{method:articleImagesInitLoad,onScroll:!0,onLoad:!0,onResize:!1,scrollTimer:!1},{method:articleBackScrollWatch,onScroll:!0,onLoad:!0,onResize:!1,scrollTimer:!1},{method:articleScrollProgressBar,onScroll:!0,onLoad:!0,onResize:!1,scrollTimer:!1}],articleScrollTop=0;
function articleBackScroll(){0==articleScrollTop?(articleScrollTop=window.pageYOffset,buttonArticleBackScroll.classList.add("unscrollButton_state_back"),scrollWindowTo(0)):(scrollWindowTo(articleScrollTop),articleBackScrollReset())}
function articleBackScrollReset(){articleScrollTop=0,buttonArticleBackScroll.classList.remove("unscrollButton_state_back")}
function articleBackScrollWatch(){try{var t=document.querySelector(".articleMain").getBoundingClientRect().top+getScrollingElement().scrollTop;this.prevOffset=this.offset||window.pageYOffset,this.offset=window.pageYOffset,this.offset>=t?(buttonArticleBackScroll.classList.contains("unscrollButton_state_back")&&0<this.offset-this.prevOffset&&articleBackScrollReset(),buttonArticleBackScroll.classList.add("unscrollButton_state_show")):!buttonArticleBackScroll.classList.contains("unscrollButton_state_back")&&this.offset-this.prevOffset<0&&buttonArticleBackScroll.classList.remove("unscrollButton_state_show")}catch(t){}}
function articleImagesInitLoad(){setTimeout(articleImagesLazyLoad,160)}
function articleImagesLazyLoad(){for(var e=0,t=articleImages.length;e<t;e++)(0<=articleImages[e].parentNode.getBoundingClientRect().top&&articleImages[e].parentNode.getBoundingClientRect().top<=1.25*window.innerHeight||articleImages[e].parentNode.getBoundingClientRect().bottom>=-1*window.innerHeight*.25&&articleImages[e].parentNode.getBoundingClientRect().bottom<=window.innerHeight)&&articleImages[e].setAttribute("src",articleImages[e].getAttribute("data-src"));articleImages=document.querySelectorAll(".articleFigure__image:not([src])")}
function articleScrollProgress(){return window.pageYOffset/(getScrollHeightPage()-window.innerHeight)}
function articleScrollProgressBar(){scrollProgress.style.width=100*articleScrollProgress()+"%"}
function switchUITheme(){root.classList.toggle("article_theme_dark")}
function getScrollHeightPage(){return Math.max(document.scrollingElement.scrollHeight,document.body.scrollHeight,document.documentElement.scrollHeight,document.scrollingElement.offsetHeight,document.body.offsetHeight,document.documentElement.offsetHeight,document.scrollingElement.clientHeight,document.body.clientHeight,document.documentElement.clientHeight)}
function getScrollingElement(){return"scrollingElement"in document?document.scrollingElement:document.body.scrollHeight!=document.body.clientHeight&&"visible"!=window.getComputedStyle(document.body,null).getPropertyValue("overflow")?document.body:document.documentElement}
!function(o){o.root=o.document.querySelector("."+o.$pageRootClassName);var a={loading:o.$pageRootClassName+"_state_loading",ready:o.$pageRootClassName+"_state_ready",loaded:o.$pageRootClassName+"_state_loaded",unloading:o.$pageRootClassName+"_state_unloading"};o.root.classList.add(a.loading),o.document.addEventListener("DOMContentLoaded",function(){o.root.classList.remove(a.loading),o.root.classList.add(a.ready)},!1),o.addEventListener("load",function(){o.root.classList.remove(a.ready),o.root.classList.add(a.loaded)},!1),o.addEventListener("beforeunload",function(){o.root.classList.remove(a.loaded),o.root.classList.add(a.unloading)},!1)}(window);
!function(e){var n=!!e.passiveSupported&&{passive:!0};e.addEventListener("load",listenWindowEvents,n),e.addEventListener("scroll",listenWindowEvents,n),e.addEventListener("resize",listenWindowEvents,n)}(window);
function listenWindowEvents(){for(var n=0,w=window.windowEvents.length;n<w;n++)window.windowEvents[n]["on"+window.event.type.charAt(0).toUpperCase()+window.event.type.substr(1)]&&(window.passiveSupported&&!window.windowEvents[n].scrollTimer?window.windowEvents[n].method.call(window):(this.stateScroll&&clearTimeout(this.stateScroll),this.stateScroll=setTimeout(function(){for(var n=0,w=window.windowEvents.length;n<w;n++)window.windowEvents[n].method.call(window)},160)))}
var lockPageScreen=function(e){var n=!1,o=null,t=null,l=0;function r(){t=e.document.body.clientHeight,e.document.body.style.height=e.innerHeight+"px",0<l&&(o+=t-e.innerHeight,e.document.body.scrollTop=o)}function i(e){e.stopImmediatePropagation(),0==l&&(l=getScrollingElement().scrollTop)}var c={isEnabled:{configurable:!1,enumerable:!1,get:function(){return n},set:void 0},scrollTop:{configurable:!1,enumerable:!1,get:function(){return o},set:void 0},on:{value:function(){n||(o=e.pageYOffset,l=0,e.document.body.style.overflow="hidden",e.document.body.style.height=e.innerHeight+"px",e.document.body.scrollTop=o,e.addEventListener("resize",r,!1),e.addEventListener("scroll",i,!1)),n=!0},configurable:!1,enumerable:!1,writable:!1},off:{value:function(){n&&(e.document.body.style.height="auto",e.document.body.style.overflow="visible",getScrollingElement().scrollTop=o,e.removeEventListener("resize",r),e.removeEventListener("scroll",i),o=null,l=0),n=!1},configurable:!1,enumerable:!1,writable:!1}};return Object.defineProperties({},c)}(window);
!function(e){e.passiveSupported=!1;try{var t=Object.defineProperty({},"passive",{get:function(){e.passiveSupported=!0}});e.addEventListener("test",null,t)}catch(e){}}(window);
function scrollWindowTo(o){"scrollBehavior"in document.documentElement.style?window.scrollTo({top:o,behavior:"smooth"}):"scrollTo"in window?window.scrollTo(o):getScrollingElement().scrollTop=o}
document.addEventListener("DOMContentLoaded",function(){articleImages=document.querySelectorAll(".articleFigure__image");for(var e=0,t=articleImages.length;e<t;e++)articleImages[e].setAttribute("data-src",articleImages[e].getAttribute("src")),articleImages[e].removeAttribute("src"),articleImages[e].parentNode.classList.add("articleFigure__picture_state_loading"),articleImages[e].addEventListener("load",function(){this.parentNode.classList.remove("articleFigure__picture_state_loading"),this.parentNode.classList.add("articleFigure__picture_state_loaded")}),articleImages[e].addEventListener("error",function(){this.parentNode.classList.remove("articleFigure__picture_state_loading"),this.parentNode.classList.add("articleFigure__picture_state_error")});var r=document.querySelector(".themeToggleButton");r&&(r.removeEventListener("click",switchUITheme),r.addEventListener("click",switchUITheme,!!window.passiveSupported&&{passive:!0})),buttonArticleBackScroll=document.querySelector(".unscrollButton"),buttonArticleBackScroll&&(buttonArticleBackScroll.removeEventListener("click",articleBackScroll),buttonArticleBackScroll.addEventListener("click",articleBackScroll,!!window.passiveSupported&&{passive:!0})),scrollProgress=document.querySelector(".scrollProgressBar__value"),document.querySelector(".controlsBar").addEventListener("click",function(){lockPageScreen.isEnabled?lockPageScreen.off():lockPageScreen.on()},!1),document.documentElement.insertBefore(document.querySelector("."+$pageRootClassName+"__shadows"),document.body.nextSibling),document.addEventListener("selectionchange",function(){this.t&&clearTimeout(this.t),this.t=setTimeout(function(){var e=window.getSelection(),t=e.getRangeAt(0),r=e.toString();console.log(e,t,r)},120)},!1)},!!window.passiveSupported&&{passive:!0});